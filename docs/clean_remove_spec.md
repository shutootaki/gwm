# `wtm` コマンド仕様: `clean` / `remove` の棲み分け

## 背景

従来の `wtm clean` はデフォルトで対話モード (一覧 → 選択) となり、`--yes` オプションを付けると一括削除が実行されていた。しかし `wtm remove` も似たような UI を持つため、ユーザーから見ると両者の違いが分かりにくかった。

## 目的

- **clean** : 安全に削除して良いワークツリーを検出し、まとめて掃除する"一括クリーンアップ"コマンドとして位置付ける。
- **remove** : ユーザーが任意のワークツリーを選択して削除する"手動削除"コマンドとして維持する。

## 仕様概要

|                  | clean                                                            | remove                                     |
| ---------------- | ---------------------------------------------------------------- | ------------------------------------------ |
| 対象候補         | `getCleanableWorktrees()` が返す _安全に消せる_ ワークツリーのみ | メイン worktree を除くすべてのワークツリー |
| デフォルト動作   | 一覧を表示し **Enter** で*全件*削除、**Esc/Ctrl-C** でキャンセル | UI で個別選択後、Enter で選択分を削除      |
| 確認スキップ     | `--force`                                                        | `--force`                                  |
| ドライラン       | `--dry-run, -n`                                                  | なし                                       |
| その他オプション | なし (`--yes`, `--interactive` は廃止)                           | `--clean-branch` 等現状維持                |

## `wtm clean` 詳細

1. `git fetch --prune origin` を実行しリモート情報を更新。
2. `getCleanableWorktrees()` で候補取得。
3. 候補数が 0 の場合 → 終了メッセージ。
4. **候補一覧**を標準出力に表示。
5. ユーザー操作:
   - **Enter** … 候補をすべて `git worktree remove --force` で削除。
   - **Esc / Ctrl-C** … 中断。
6. 進捗・完了/エラーを表示。

### オプション

| オプション        | 説明                                      |
| ----------------- | ----------------------------------------- |
| `-n`, `--dry-run` | 一覧表示のみ。削除は行わない。            |
| `--force`         | 手動確認を省略し即時削除（CI 等で利用）。 |

> 既存の `--yes` は **廃止** し、指定された場合はエラーを返す。`--interactive`/`-i` も導入しない。

## `wtm remove` 詳細

従来の挙動をそのまま維持。

- `git worktree list` で取得した **メイン以外** のワークツリーを MultiSelectList で提示。
- `--force`, `--clean-branch=<auto|ask|never>` などのオプション仕様も変更なし。

## マイグレーション・互換性

- `wtm clean --yes` を使っていたスクリプト／CI は `wtm clean --force` に置き換える。
- `wtm clean -i` を使っていた場合は `wtm remove` に乗り換える。
- CLI ヘルプ・README に廃止オプションの告知と移行パスを記載する。

## 実装タスク

1. CLI レイヤ
   - `--yes` と `--interactive/-i` をオプション定義から削除。
   - `--dry-run/-n`, `--force` を追加 (`clean` のみ)。
2. `WorktreeClean` コンポーネント
   - `yes` props を削除。
   - 初期ステージを `confirm` 固定。
   - `MultiSelectList` は廃止。
   - `useInput` で Enter/ESC のみ処理。
   - `--force` が渡された場合は確認をスキップ。
3. ドキュメント更新
   - README、`wtm --help` 出力、CHANGELOG。
4. CI / テストケース追加
   - `wtm clean --dry-run` で何も削除しないことを検証。
   - `--force` で無確認削除されることを検証。
